var W=Object.defineProperty;var V=o=>{throw TypeError(o)};var Y=(o,s,a)=>s in o?W(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a;var O=(o,s,a)=>Y(o,typeof s!="symbol"?s+"":s,a),ee=(o,s,a)=>s.has(o)||V("Cannot "+a);var T=(o,s,a)=>(ee(o,s,"read from private field"),a?a.call(o):s.get(o)),H=(o,s,a)=>s.has(o)?V("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(o):s.set(o,a);import{H as te,r as S,d as N,t as b,v as $,I as P,J as I,x as c,y as B,B as Z,j as k,z as M,K as j,T as ae,A as se,L as G,M as L,N as ne,a as re,O as E,P as oe,Q as ie,R as le,S as de,U as ce,V as ue,W as q,X as ge,Y as fe,Z as K,$ as R,a0 as me,a1 as he}from"./BK96e6BX.js";const ve=te("games",()=>{const o=S([]),s=S([]),a=S([]),e=r=>{localStorage.setItem(`games_data_page_${r}`,JSON.stringify(o.value)),localStorage.setItem(`games_undo_page_${r}`,JSON.stringify(s.value)),localStorage.setItem(`games_redo_page_${r}`,JSON.stringify(a.value))},t=r=>{{const i=localStorage.getItem(`games_data_page_${r}`),u=localStorage.getItem(`games_undo_page_${r}`),m=localStorage.getItem(`games_redo_page_${r}`);if(i){const D=JSON.parse(i);(!o.value.length||JSON.stringify(o.value)!==JSON.stringify(D))&&(o.value=D)}u&&(s.value=JSON.parse(u)??[]),m&&(a.value=JSON.parse(m)??[])}},n=r=>{s.value.push(JSON.parse(JSON.stringify(o.value))),s.value.length>20&&s.value.shift(),a.value=[],e(r)},d=(r,i)=>{for(let u=0;u<r.length;u++){if(r[u].id===i)return r.splice(u,1)[0];if(r[u].children){const m=d(r[u].children,i);if(m)return m}}return null},f=(r,i,u)=>{for(const m of r){if(m.id===i)return m.children=m.children||[],m.children.push(u),!0;if(m.children&&f(m.children,i,u))return!0}return!1};return{games:o,loadState:t,persistState:e,moveGame:(r,i,u)=>{if(r===i)return;n(u);const m=d(o.value,r);if(!m){e(u);return}i==="root"?o.value.push(m):f(o.value,i,m)||o.value.push(m),e(u)},undo:r=>{if(!s.value.length)return;a.value.push(JSON.parse(JSON.stringify(o.value)));const i=s.value.pop();i&&(o.value=i),e(r)},redo:r=>{if(!a.value.length)return;s.value.push(JSON.parse(JSON.stringify(o.value)));const i=a.value.pop();i&&(o.value=i),e(r)}}}),pe="data:image/svg+xml,%3csvg%20width='16'%20height='12'%20viewBox='0%200%2016%2012'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.799805%202.39961C0.799805%201.4055%201.60569%200.599609%202.5998%200.599609H7.0998L8.8998%202.39961H13.3998C14.3939%202.39961%2015.1998%203.2055%2015.1998%204.19961V9.59961C15.1998%2010.5937%2014.3939%2011.3996%2013.3998%2011.3996H2.5998C1.60569%2011.3996%200.799805%2010.5937%200.799805%209.59961V2.39961Z'%20fill='%2392A1BF'/%3e%3c/svg%3e",Q="data:image/svg+xml,%3csvg%20width='12'%20height='16'%20viewBox='0%200%2012%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M0.599609%202.5998C0.599609%201.60569%201.4055%200.799805%202.39961%200.799805H6.52683C7.00419%200.799805%207.46202%200.989444%207.79961%201.32702L10.8724%204.3998C11.21%204.73737%2011.3996%205.19521%2011.3996%205.67259V13.3998C11.3996%2014.3939%2010.5937%2015.1998%209.59961%2015.1998H2.39961C1.4055%2015.1998%200.599609%2014.3939%200.599609%2013.3998V2.5998Z'%20fill='%2392A1BF'/%3e%3c/svg%3e",ye="data:image/svg+xml,%3csvg%20width='10'%20height='6'%20viewBox='0%200%2010%206'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1%201L5%205L9%201'%20stroke='%23E5EDFF'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",X="data:image/svg+xml,%3csvg%20width='16'%20height='4'%20viewBox='0%200%2016%204'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%200C6.9%200%206%200.9%206%202C6%203.1%206.9%204%208%204C9.1%204%2010%203.1%2010%202C10%200.9%209.1%200%208%200ZM14%200C12.9%200%2012%200.9%2012%202C12%203.1%2012.9%204%2014%204C15.1%204%2016%203.1%2016%202C16%200.9%2015.1%200%2014%200ZM2%200C0.9%200%200%200.9%200%202C0%203.1%200.9%204%202%204C3.1%204%204%203.1%204%202C4%200.9%203.1%200%202%200Z'%20fill='%23E5EDFF'/%3e%3c/svg%3e",_e={class:"expended-box expended-item"},we={class:"cell table-80"},De={class:"td-item"},$e={class:"cell table-30"},be={class:"td-item"},Se={class:"cell full-width"},Ce={class:"td-item"},Be={class:"cell table-80"},Oe={class:"exp-div"},xe={class:"exp-menu"},Re=N({__name:"RowChild",props:{game:{},index:{},level:{},expandedRows:{}},emits:["edit-game","remove-game","dragged"],setup(o,{emit:s}){const a=o,e=s,t=S(!1);function n(r){return a.expandedRows[r]===!0}function d(r){var i,u;(i=r.dataTransfer)==null||i.setData("text/plain",a.game.id),(u=r.dataTransfer)==null||u.setData("level",String(a.level)),r.dataTransfer.effectAllowed="move",t.value=!1,console.log("dragstart: "+a.game.id)}function f(r){t.value=!0}function p(r){t.value=!1}function h(r){var D,l;r.preventDefault(),t.value=!1;const i=(D=r.dataTransfer)==null?void 0:D.getData("text/plain"),u=Number((l=r.dataTransfer)==null?void 0:l.getData("level")),m=a.level;i&&i!==a.game.id&&u===m?e("dragged",{draggedId:i,targetId:a.game.id}):console.log("Drop not allowed: level mismatch")}function y(r){t.value=!1}return(r,i)=>($(),b("div",{class:I(["expended-td",[{"drag-over":t.value},{expanded:n(r.game.id)}]]),draggable:"true",onDragstart:d,onDragenter:f,onDragleave:p,onDragover:i[0]||(i[0]=P(()=>{},["prevent"])),onDrop:h,onDragend:y},[c("div",_e,[c("div",we,[c("div",De,[i[1]||(i[1]=c("span",null,"â„–",-1)),c("p",null,B(r.game.id),1)])]),c("div",$e,[c("div",be,[i[3]||(i[3]=c("span",null,"Name",-1)),c("p",null,[i[2]||(i[2]=c("img",{src:Q,alt:"Docs"},null,-1)),Z(" "+B(r.game.name),1)])])]),i[5]||(i[5]=c("div",{class:"cell table-20"},null,-1)),c("div",Se,[c("div",Ce,[i[4]||(i[4]=c("span",null,"Order",-1)),c("p",null,B(r.game.order),1)])]),c("div",Be,[c("div",Oe,[c("span",xe,[c("img",{src:X,alt:"Toggle",class:I({expanded:n(r.game.id)})},null,2)])])])])],34))}}),Ee={class:"row-wrapper"},ze={class:"cell table-80"},Ie={class:"td-item"},Te={class:"cell table-30"},je={class:"td-item"},Ne={key:0,src:pe,alt:"File"},Pe={key:1,src:Q,alt:"Docs"},ke={class:"cell table-20"},Me={class:"td-item"},Ae={key:0,class:"cell full-width"},Ge={class:"cell full-width justify-between"},Le={class:"sub-categories"},Je={class:"td-item"},Ue={key:0,class:"sub-count"},Fe={class:"cell table-150"},Ve={class:"exp-td"},He={key:1,class:"exp-menu"},qe={key:0,class:"expand-row"},Ze={class:"expand-content"},Ke=N({__name:"RowItem",props:{game:{},index:{},level:{},expandedRows:{}},emits:["edit-game","remove-game","dragged"],setup(o,{emit:s}){const a=o,e=s,t=S(!1),n=S(!1),d=k(()=>a.level===0?a.index+1:""),f=k(()=>a.game.children&&a.game.children.length>0);function p(l){return a.expandedRows[l]===!0}function h(l){a.expandedRows[l]=!a.expandedRows[l]}function y(l){var g,_;(g=l.dataTransfer)==null||g.setData("text/plain",a.game.id),(_=l.dataTransfer)==null||_.setData("level",String(a.level)),l.dataTransfer.effectAllowed="move",t.value=!1,n.value=!0}function r(l){t.value=!0,n.value=!0}function i(l){t.value=!1,n.value=!1}function u(l){var C,w;l.preventDefault(),t.value=!1;const g=(C=l.dataTransfer)==null?void 0:C.getData("text/plain"),_=Number((w=l.dataTransfer)==null?void 0:w.getData("level")),v=a.level;g&&g!==a.game.id&&_===v?e("dragged",{draggedId:g,targetId:a.game.id}):console.log("Drop not allowed: level mismatch")}function m(l){t.value=!1,n.value=!1}const D=l=>{var g;return((g=l.children)==null?void 0:g.map(_=>_.name).join("/"))||""};return(l,g)=>{var _;return $(),b("div",Ee,[c("div",{class:I(["row-item",[{"drag-over":t.value},{expanded:p(l.game.id)},{dragging:n.value}]]),draggable:"true",onDragstart:y,onDragenter:r,onDragleave:i,onDragover:g[1]||(g[1]=P(()=>{},["prevent"])),onDrop:u,onDragend:m},[c("div",ze,[c("div",Ie,[g[5]||(g[5]=c("span",null,"â„–",-1)),c("p",null,B(d.value),1)])]),c("div",Te,[c("div",je,[g[6]||(g[6]=c("span",null,"Name",-1)),c("p",null,[(_=l.game.children)!=null&&_.length?($(),b("img",Ne)):($(),b("img",Pe)),Z(" "+B(l.game.name),1)])])]),c("div",ke,[c("div",Me,[g[7]||(g[7]=c("span",null,"Order",-1)),c("p",null,B(l.game.order),1)])]),l.game.children?($(),b("div",Ae,[c("div",Ge,[c("div",Le,[g[8]||(g[8]=c("span",null,"Sub categories",-1)),c("p",Je,B(D(l.game)),1)]),l.game.children&&l.game.children.length?($(),b("span",Ue,B(l.game.children?l.game.children.length:0),1)):j("",!0)])])):j("",!0),c("div",Fe,[c("div",Ve,[f.value?($(),b("span",{key:0,class:"exp-arrow",onClick:g[0]||(g[0]=P(v=>h(l.game.id),["stop"]))},[c("img",{src:ye,alt:"Toggle",class:I({expanded:p(l.game.id)})},null,2)])):j("",!0),f.value?($(),b("span",He,g[9]||(g[9]=[c("img",{src:X,alt:"Toggle"},null,-1)]))):j("",!0)])])],34),M(ae,{name:"expand"},{default:se(()=>[p(l.game.id)?($(),b("div",qe,[c("div",Ze,[($(!0),b(G,null,L(l.game.children,(v,C)=>($(),ne(Re,{key:v.id,game:v,index:C,level:l.level+1,expandedRows:l.expandedRows,onEditGame:g[2]||(g[2]=w=>l.$emit("edit-game",w)),onRemoveGame:g[3]||(g[3]=w=>l.$emit("remove-game",w)),onDragged:g[4]||(g[4]=w=>l.$emit("dragged",w.draggedId,w.targetId))},null,8,["game","index","level","expandedRows"]))),128))])])):j("",!0)]),_:1})])}}}),Qe={class:"games-list"},Xe=N({__name:"GamesTable",props:{games:{}},emits:["edit-game","remove-game","dragged"],setup(o,{emit:s}){const a=s,e=S({}),t=S(!1);function n(h){console.log("onDragged in GamesTable:",h.draggedId,h.targetId),a("dragged",h)}function d(h){t.value=!0,console.log("Dropâ€‘zone: dragenter")}function f(h){t.value=!1,console.log("Dropâ€‘zone: dragleave")}function p(h){var r;h.preventDefault(),t.value=!1;const y=(r=h.dataTransfer)==null?void 0:r.getData("text/plain");console.log("ðŸ”¥ Dropâ€‘zone onRootDrop, draggedId =",y),y&&a("dragged",{draggedId:y,targetId:"root"})}return(h,y)=>($(),b("div",null,[c("ul",Qe,[($(!0),b(G,null,L(h.games,(r,i)=>($(),b("li",{key:r.id,class:"game-item"},[M(Ke,{game:r,index:i,level:0,expandedRows:e.value,onEditGame:y[0]||(y[0]=u=>h.$emit("edit-game",u)),onRemoveGame:y[1]||(y[1]=u=>h.$emit("remove-game",u)),onDragged:n},null,8,["game","index","expandedRows"])]))),128))]),c("div",{class:I(["drop-zone-row",{"drag-over":t.value}]),onDragenter:d,onDragover:y[2]||(y[2]=P(()=>{},["prevent"])),onDragleave:f,onDrop:p},y[3]||(y[3]=[c("div",{class:"drop-zone-text"},null,-1)]),34)]))}}),We={class:"pagination"},Ye=["onClick"],et=N({__name:"Pagination",props:{pagesCount:{},currentPage:{}},emits:["page-change"],setup(o,{emit:s}){const a=s;function e(t){a("page-change",t)}return(t,n)=>($(),b("div",We,[($(!0),b(G,null,L(t.pagesCount,d=>($(),b("button",{class:I(["btn-pagination",{active:d===t.currentPage}]),key:d,onClick:f=>e(d)},B(d),11,Ye))),128))]))}});function tt(o){return typeof o=="string"?`'${o}'`:new at().serialize(o)}const at=function(){var s;class o{constructor(){H(this,s,new Map)}compare(e,t){const n=typeof e,d=typeof t;return n==="string"&&d==="string"?e.localeCompare(t):n==="number"&&d==="number"?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(e===null)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if(t!=="[object Object]")return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const n=e.constructor,d=n===Object||n===void 0?"":n.name;if(d!==""&&globalThis[d]===n)return this.serializeBuiltInType(d,e);if(typeof e.toJSON=="function"){const f=e.toJSON();return d+(f!==null&&typeof f=="object"?this.$object(f):`(${this.serialize(f)})`)}return this.serializeObjectEntries(d,Object.entries(e))}serializeBuiltInType(e,t){const n=this["$"+e];if(n)return n.call(this,t);if(typeof(t==null?void 0:t.entries)=="function")return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const n=Array.from(t).sort((f,p)=>this.compare(f[0],p[0]));let d=`${e}{`;for(let f=0;f<n.length;f++){const[p,h]=n[f];d+=`${this.serialize(p,!0)}:${this.serialize(h)}`,f<n.length-1&&(d+=",")}return d+"}"}$object(e){let t=T(this,s).get(e);return t===void 0&&(T(this,s).set(e,`#${T(this,s).size}`),t=this.serializeObject(e),T(this,s).set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return t.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let n=0;n<e.length;n++)t+=this.serialize(e[n]),n<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((t,n)=>this.compare(t,n)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}s=new WeakMap;for(const a of["Error","RegExp","URL"])o.prototype["$"+a]=function(e){return`${a}(${e})`};for(const a of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+a]=function(e){return`${a}[${e.join(",")}]`};for(const a of["BigInt64Array","BigUint64Array"])o.prototype["$"+a]=function(e){return`${a}[${e.join("n,")}${e.length>0?"n":""}]`};return o}(),st=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],nt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",x=[];class ot{constructor(){O(this,"_data",new z);O(this,"_hash",new z([...st]));O(this,"_nDataBytes",0);O(this,"_minBufferSize",0)}finalize(s){s&&this._append(s);const a=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(a/4294967296),this._data.words[(e+64>>>9<<4)+15]=a,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(s,a){const e=this._hash.words;let t=e[0],n=e[1],d=e[2],f=e[3],p=e[4],h=e[5],y=e[6],r=e[7];for(let i=0;i<64;i++){if(i<16)x[i]=s[a+i]|0;else{const v=x[i-15],C=(v<<25|v>>>7)^(v<<14|v>>>18)^v>>>3,w=x[i-2],J=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;x[i]=C+x[i-7]+J+x[i-16]}const u=p&h^~p&y,m=t&n^t&d^n&d,D=(t<<30|t>>>2)^(t<<19|t>>>13)^(t<<10|t>>>22),l=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),g=r+l+u+nt[i]+x[i],_=D+m;r=y,y=h,h=p,p=f+g|0,f=d,d=n,n=t,t=g+_|0}e[0]=e[0]+t|0,e[1]=e[1]+n|0,e[2]=e[2]+d|0,e[3]=e[3]+f|0,e[4]=e[4]+p|0,e[5]=e[5]+h|0,e[6]=e[6]+y|0,e[7]=e[7]+r|0}_append(s){typeof s=="string"&&(s=z.fromUtf8(s)),this._data.concat(s),this._nDataBytes+=s.sigBytes}_process(s){let a,e=this._data.sigBytes/64;s?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const t=e*16,n=Math.min(t*4,this._data.sigBytes);if(t){for(let d=0;d<t;d+=16)this._doProcessBlock(this._data.words,d);a=this._data.words.splice(0,t),this._data.sigBytes-=n}return new z(a,n)}}class z{constructor(s,a){O(this,"words");O(this,"sigBytes");s=this.words=s||[],this.sigBytes=a===void 0?s.length*4:a}static fromUtf8(s){const a=unescape(encodeURIComponent(s)),e=a.length,t=[];for(let n=0;n<e;n++)t[n>>>2]|=(a.charCodeAt(n)&255)<<24-n%4*8;return new z(t,e)}toBase64(){const s=[];for(let a=0;a<this.sigBytes;a+=3){const e=this.words[a>>>2]>>>24-a%4*8&255,t=this.words[a+1>>>2]>>>24-(a+1)%4*8&255,n=this.words[a+2>>>2]>>>24-(a+2)%4*8&255,d=e<<16|t<<8|n;for(let f=0;f<4&&a*8+f*6<this.sigBytes*8;f++)s.push(rt.charAt(d>>>6*(3-f)&63))}return s.join("")}concat(s){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let a=0;a<s.sigBytes;a++){const e=s.words[a>>>2]>>>24-a%4*8&255;this.words[this.sigBytes+a>>>2]|=e<<24-(this.sigBytes+a)%4*8}else for(let a=0;a<s.sigBytes;a+=4)this.words[this.sigBytes+a>>>2]=s.words[a>>>2];this.sigBytes+=s.sigBytes}}function it(o){return new ot().finalize(o).toBase64()}function lt(o){return it(tt(o))}const dt=o=>o==="defer"||o===!1;function ct(...o){var D;const s=typeof o[o.length-1]=="string"?o.pop():void 0;typeof o[0]!="string"&&o.unshift(s);let[a,e,t={}]=o;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof e!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const n=re(),d=e,f=()=>E.value,p=()=>n.isHydrating?n.payload.data[a]:n.static.data[a];t.server??(t.server=!0),t.default??(t.default=f),t.getCachedData??(t.getCachedData=p),t.lazy??(t.lazy=!1),t.immediate??(t.immediate=!0),t.deep??(t.deep=E.deep),t.dedupe??(t.dedupe="cancel");const h=t.getCachedData(a,n),y=h!=null;if(!n._asyncData[a]||!t.immediate){(D=n.payload._errors)[a]??(D[a]=E.errorValue);const l=t.deep?S:oe;n._asyncData[a]={data:l(y?h:t.default()),pending:S(!y),error:ie(n.payload._errors,a),status:S("idle"),_default:t.default}}const r={...n._asyncData[a]};delete r._default,r.refresh=r.execute=(l={})=>{if(n._asyncDataPromises[a]){if(dt(l.dedupe??t.dedupe))return n._asyncDataPromises[a];n._asyncDataPromises[a].cancelled=!0}if(l._initial||n.isHydrating&&l._initial!==!1){const _=l._initial?h:t.getCachedData(a,n);if(_!=null)return Promise.resolve(_)}r.pending.value=!0,r.status.value="pending";const g=new Promise((_,v)=>{try{_(d(n))}catch(C){v(C)}}).then(async _=>{if(g.cancelled)return n._asyncDataPromises[a];let v=_;t.transform&&(v=await t.transform(_)),t.pick&&(v=gt(v,t.pick)),n.payload.data[a]=v,r.data.value=v,r.error.value=E.errorValue,r.status.value="success"}).catch(_=>{if(g.cancelled)return n._asyncDataPromises[a];r.error.value=fe(_),r.data.value=K(t.default()),r.status.value="error"}).finally(()=>{g.cancelled||(r.pending.value=!1,delete n._asyncDataPromises[a])});return n._asyncDataPromises[a]=g,n._asyncDataPromises[a]},r.clear=()=>ut(n,a);const i=()=>r.refresh({_initial:!0}),u=t.server!==!1&&n.payload.serverRendered;{const l=le();if(l&&u&&t.immediate&&!l.sp&&(l.sp=[]),l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const v=l._nuxtOnBeforeMountCbs;de(()=>{v.forEach(C=>{C()}),v.splice(0,v.length)}),ce(()=>v.splice(0,v.length))}u&&n.isHydrating&&(r.error.value||h!=null)?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):l&&(n.payload.serverRendered&&n.isHydrating||t.lazy)&&t.immediate?l._nuxtOnBeforeMountCbs.push(i):t.immediate&&i();const g=ge();if(t.watch){const v=ue(t.watch,()=>r.refresh());g&&q(v)}const _=n.hook("app:data:refresh",async v=>{(!v||v.includes(a))&&await r.refresh()});g&&q(_)}const m=Promise.resolve(n._asyncDataPromises[a]).then(()=>r);return Object.assign(m,r),m}function ut(o,s){s in o.payload.data&&(o.payload.data[s]=void 0),s in o.payload._errors&&(o.payload._errors[s]=E.errorValue),o._asyncData[s]&&(o._asyncData[s].data.value=void 0,o._asyncData[s].error.value=E.errorValue,o._asyncData[s].pending.value=!1,o._asyncData[s].status.value="idle"),s in o._asyncDataPromises&&(o._asyncDataPromises[s]&&(o._asyncDataPromises[s].cancelled=!0),o._asyncDataPromises[s]=void 0)}function gt(o,s){const a={};for(const e of s)a[e]=o[e];return a}function ft(o,s,a){const[e={},t]=[{},s],n=k(()=>R(o)),d=e.key||lt([t,typeof n.value=="string"?n.value:"",...mt(e)]);if(!d||typeof d!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+d);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const f=d===t?"$f"+d:d;if(!e.baseURL&&typeof n.value=="string"&&n.value[0]==="/"&&n.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:p,lazy:h,default:y,transform:r,pick:i,watch:u,immediate:m,getCachedData:D,deep:l,dedupe:g,..._}=e,v=me({...he,..._,cache:typeof e.cache=="boolean"?void 0:e.cache}),C={server:p,lazy:h,default:y,transform:r,pick:i,immediate:m,getCachedData:D,deep:l,dedupe:g,watch:u===!1?[]:[v,n,...u||[]]};let w;return ct(f,()=>{var F;(F=w==null?void 0:w.abort)==null||F.call(w,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),w=typeof AbortController<"u"?new AbortController:{};const U=R(e.timeout);let A;return U&&(A=setTimeout(()=>w.abort(new DOMException("Request aborted due to timeout.","AbortError")),U),w.signal.onabort=()=>clearTimeout(A)),(e.$fetch||globalThis.$fetch)(n.value,{signal:w.signal,...v}).finally(()=>{clearTimeout(A)})},C)}function mt(o){var a;const s=[((a=R(o.method))==null?void 0:a.toUpperCase())||"GET",R(o.baseURL)];for(const e of[o.params||o.query]){const t=R(e);if(!t)continue;const n={};for(const[d,f]of Object.entries(t))n[R(d)]=R(f);s.push(n)}return s}const ht={class:"games-page games-table-wrapper container"},vt={class:"footer-pagination"},pt=5,Dt=N({__name:"index",setup(o){const s=ve(),a=S(1),e=S(0),t=k(()=>Math.ceil(e.value/pt));async function n(r=1){a.value=r;const{data:i,error:u}=await ft(`/api/games?page=${r}`,"$77hSeXQoip");if(u.value){console.error("Error loading games:",u.value);return}if(i.value){const m=i.value.items,D=`games_data_page_${r}`,l=localStorage.getItem(D);l?(s.games=JSON.parse(l),s.loadState(r)):(s.games=m,localStorage.setItem(D,JSON.stringify(m))),e.value=i.value.total}}s.games.length||n(1);function d(r){s.moveGame(r.draggedId,r.targetId,a.value)}function f(r){alert(`Edit game: ${r.name}`)}function p(r){if(confirm("Are you sure you want to delete this game?")){const i=(u,m)=>{for(let D=0;D<u.length;D++){if(u[D].id===m)return u.splice(D,1),!0;if(u[D].children&&i(u[D].children,m))return!0}return!1};i(s.games,r)}}function h(){s.undo(a.value)}function y(){s.redo(a.value)}return(r,i)=>($(),b("div",ht,[i[0]||(i[0]=c("h1",null,"Games List",-1)),c("div",{class:"controls"},[c("button",{onClick:h},"Undo"),c("button",{onClick:y},"Redo")]),M(Xe,{games:K(s).games,onEditGame:f,onRemoveGame:p,onDragged:d},null,8,["games"]),c("div",vt,[M(et,{pagesCount:t.value,currentPage:a.value,onPageChange:n},null,8,["pagesCount","currentPage"])])]))}});export{Dt as default};
